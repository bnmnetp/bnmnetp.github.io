
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>BeautifulSoup, Bonktown and Growl - A Reputable Journal</title>
  <meta name="author" content="Brad Miller">

  
  <meta name="description" content="Here&#8217;s a little script that combines two of my favorite pass times. Python programming and cycling. bonktown.com is a great site that has steep &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://reputablejournal.com/blog/2009/07/23/beautifulsoup-bonktown-and-growl/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="A Reputable Journal" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-32638348-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:reputablejournal.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
    <li><a href="/">
        <span class="blue_light">
            A Reputable Journal
        </span>
       
           <span class="blue_dark">
             ~ A Blog you can Trust
           </span>
       
    </a></li>
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
  <li><a href="/about">About me</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">BeautifulSoup, Bonktown and Growl</h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-07-23T00:00:00-05:00" pubdate data-updated="true">Jul 23<span>rd</span>, 2009</time>
        
      </p>
    
  </header>


<div class="entry-content">Here&#8217;s a little script that combines two of my favorite pass times.  Python programming and cycling.  bonktown.com is a great site that has steep discounts on road cycling gear.  They only sell one item at a time and they typically sell that item until it is gone.  I&#8217;ve gotten some great deals on clothing and other stuff on that site.  Bonktown helps you know whats currently for sale in a number of ways, including a nice dashboard widget that pops up a notifier when something new comes on sale.  The problem is that over time I&#8217;ve started to ignore the growl notifiers for bonktown, because I&#8217;m not interested in lots of the stuff they sell.<br /><br />So, I wrote this python script that allows me to look for the stuff I am interested in buying.  It works by having a file of regular expressions that I use to search the item descriptions when something goes on sale at bonktown. If the item matches something I&#8217;m looking for then I get a Growl notification.  If not then I don&#8217;t hear about it.<br /><br />Here&#8217;s the code:<br /><br /><pre class="prettyprint" style="overflow:auto;"><br />#!/usr/bin/env python2.6<br /><br />import re<br />import urllib<br />from BeautifulSoup import BeautifulSoup<br />import Growl<br /><br />name = "MyBonk"   # was BonkMe<br />notifications = ["search_hit"]<br />notifier = Growl.GrowlNotifier(name,notifications)<br />notifier.register()<br /><br /># Read file of search Terms<br />myTerms = open("/Users/bmiller/lib/bonk_items.txt").readlines()<br /><br /><br /># Get the latest page<br />bt = urllib.urlopen("http://www.bonktown.com")<br /><br />doc = BeautifulSoup(bt.read())<br /><br />itemlist = doc.findAll(id=re.compile("item_title"))<br />price = doc.findAll(id=re.compile("price"))<br />desc = doc.findAll(id=re.compile("item_description"))<br /><br />for term in myTerms:<br />    for i in range(len(itemlist)):<br />        if itemlist[i] and re.search(term[:-1],itemlist[i].contents[0],re.IGNORECASE):<br />            notifier.notify("search_hit",<br />                            itemlist[i].contents[0],<br />                            desc[i].contents[7].contents[0],<br />                            sticky=False)<br /><br /></pre><br /><br />This script makes use of several modules:<br /><ul><br /><li>Growl</li><br /><li>BeautifulSoup</li><br /><li>urllib</li><br /><li>re</li><br /></ul><br /><br />I would have liked to use one of the standard library html/xml parsers, but I could not find one that was as convenient or easy to use as BeautifulSoup.  If you can tell me how to parse messy html with one of the standard library xml modules please let me know.<br /><div class="blogger-post-footer"><img width='1' height='1' src='https://blogger.googleusercontent.com/tracker/2759017781463016019-1449130420935951350?l=blog.bonelakesoftware.com' alt='' /></div>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Brad Miller</span></span>

      








  


<time datetime="2009-07-23T00:00:00-05:00" pubdate data-updated="true">Jul 23<span>rd</span>, 2009</time>
      

<span class="categories">
  
    <a class='category' href='/blog/categories/python/'>Python</a>, <a class='category' href='/blog/categories/biking/'>biking</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://reputablejournal.com/blog/2009/07/23/beautifulsoup-bonktown-and-growl/" data-via="bnmnetp" data-counturl="http://reputablejournal.com/blog/2009/07/23/beautifulsoup-bonktown-and-growl/" >Tweet</a>
  
  
  <div class="g-plusone" data-size="medium"></div>
  
  
    <div class="fb-like" data-send="true" data-width="450" data-show-faces="false"></div>
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2009/07/03/aquamacs-2-0-elisp-fun/" title="Previous Post: Aquamacs 2.0 elisp fun">&laquo; Aquamacs 2.0 elisp fun</a>
      
      
        <a class="basic-alignment right" href="/blog/2009/12/27/airboat-ride-in-the-everglades/" title="Next Post: Airboat Ride in the Everglades">Airboat Ride in the Everglades &raquo;</a>
      
    </p>
  </footer>
</article>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2014/03/25/lake-tahoe/">Lake Tahoe</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/03/23/the-word-of-the-day-is-malolactic/">The Word of the Day is Malolactic</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/03/08/the-long-winter/">The Long Winter</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/03/05/easy-publishing-with-runestone-interactive/">Easy Publishing with Runestone Interactive</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/02/01/reflections-on-jterm-2014/">Reflections on January 2014</a>
      </li>
    
  </ul>
</section>
<section>
  <h1>About Me</h1>
  <img  src="/images/head_shot_2013.jpg" width="100%" />
  <p>Brad Miller is an Associate Professor of Computer Science at <a href="http://www.luther.edu">Luther College</a> He is the founder of <a href="http://runestoneinteractive.org">Runestone Interactive</a>. He loves to travel, hack, bike and cook. Note necessarily in that order.</p>
</section>
<section>
  <h1>Tag Cloud</h1>
    <span id="tag-cloud"><a href='/blog/categories/alaska' style='font-size: 100.96774193548387%'>alaska(1)</a> <a href='/blog/categories/applications' style='font-size: 100.96774193548387%'>Applications(1)</a> <a href='/blog/categories/biking' style='font-size: 105.80645161290323%'>biking(6)</a> <a href='/blog/categories/books' style='font-size: 100.96774193548387%'>Books(1)</a> <a href='/blog/categories/cabin' style='font-size: 100.96774193548387%'>cabin(1)</a> <a href='/blog/categories/cabin' style='font-size: 100.96774193548387%'>Cabin(1)</a> <a href='/blog/categories/cooking' style='font-size: 100.96774193548387%'>cooking(1)</a> <a href='/blog/categories/education' style='font-size: 102.90322580645162%'>education(3)</a> <a href='/blog/categories/emacs' style='font-size: 100.96774193548387%'>Emacs(1)</a> <a href='/blog/categories/friends' style='font-size: 100.96774193548387%'>friends(1)</a> <a href='/blog/categories/interactivepython' style='font-size: 100.96774193548387%'>interactivepython(1)</a> <a href='/blog/categories/israel' style='font-size: 101.93548387096774%'>israel(2)</a> <a href='/blog/categories/josh-martin-at-heroes-acre' style='font-size: 100.96774193548387%'>Josh Martin at Heroe's Acre(1)</a> <a href='/blog/categories/jterm11' style='font-size: 116.45161290322581%'>Jterm11(17)</a> <a href='/blog/categories/jterm14' style='font-size: 111.61290322580645%'>JTerm14(12)</a> <a href='/blog/categories/lake' style='font-size: 100.96774193548387%'>lake(1)</a> <a href='/blog/categories/mac' style='font-size: 101.93548387096774%'>Mac(2)</a> <a href='/blog/categories/namibia' style='font-size: 115.48387096774194%'>namibia(16)</a> <a href='/blog/categories/photography' style='font-size: 101.93548387096774%'>photography(2)</a> <a href='/blog/categories/python' style='font-size: 110.64516129032258%'>Python(11)</a> <a href='/blog/categories/python' style='font-size: 108.70967741935483%'>python(9)</a> <a href='/blog/categories/runestoneinteractive' style='font-size: 100.96774193548387%'>runestoneinteractive(1)</a> <a href='/blog/categories/siliconvalley' style='font-size: 102.90322580645162%'>SiliconValley(3)</a> <a href='/blog/categories/southamerica2011' style='font-size: 112.58064516129032%'>SouthAmerica2011(13)</a> <a href='/blog/categories/teaching' style='font-size: 100.96774193548387%'>teaching(1)</a> <a href='/blog/categories/travel' style='font-size: 160.0%'>Travel(62)</a> <a href='/blog/categories/travel' style='font-size: 121.29032258064515%'>travel(22)</a> </span>
</section>

<section class="googleplus">
  <h1>
    <a href="https://plus.google.com/+BradMillerNorse?rel=author">
      <img src="http://www.google.com/images/icons/ui/gprofile_button-32.png" width="32" height="32">
      Google+
    </a>
  </h1>
</section>



<section>
  <h1>Latest Tweets</h1>
  <ul id="tweets">
    <a class="twitter-timeline" data-dnt="true" href="https://twitter.com/bnmnetp"  data-widget-id=""  data-link-color="#1863a1" data-tweet-limit="" data-chrome="noheader nofooter transparent noscrollbar">Tweets by @bnmnetp</a>
    <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+"://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
  </ul>
  
    <p>Follow <a href="http://twitter.com/bnmnetp">@bnmnetp</a></p>
  
</section>


<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating...</li>
  </ul>
  
  <a href="https://github.com/bnmnetp">@bnmnetp</a> on GitHub
  
  <script type="text/javascript">
    $.domReady(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'bnmnetp',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>


  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2014 - Brad Miller -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>



  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
