<!DOCTYPE html>
<html prefix="
og: http://ogp.me/ns#
article: http://ogp.me/ns/article#
" lang="en">
    <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <title>BeautifulSoup, Bonktown and Growl | A Reputable Journal</title>

                <link href="../../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">

                <link rel="alternate" type="application/rss+xml" title="RSS" href="../../../rss.xml">

      <link rel="canonical" href="http://reputablejournal.com/posts/2009/07/beautifulsoup-bonktown-and-growl.html">



    
        <!--[if lt IE 9]><script src="/assets/js/html5.js"></script><![endif]-->

    

    
    <meta name="author" content="Brad Miller">
            <meta name="og:title" content="BeautifulSoup, Bonktown and Growl">
        <meta name="og:url" content="http://reputablejournal.com/posts/2009/07/beautifulsoup-bonktown-and-growl.html">
            <meta name="og:description" content="Here's a little script that combines two of my favorite pass times.  Python programming and cycling.  bonktown.com is a great site that has steep discounts on road cycling gear.  They only sell one it">
        <meta name="og:site_name" content="A Reputable Journal">
        <meta name="og:type" content="article">

    
    

</head>
<body>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
    <div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="http://reputablejournal.com/">

                <span id="blog-title">A Reputable Journal</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse navbar-ex1-collapse">
            <ul class="nav navbar-nav">
                                <li>
<a href="../../../stories/about.html">About</a>
                </li>
<li>
<a href="../../../archive.html">Archives</a>
                </li>
<li>
<a href="../../../categories/index.html">Tags</a>
                </li>
<li>
<a href="../../../galleries">Photos</a>
                </li>
<li>
<a href="../../../stories/publications.html">Publications</a>

                
            </li>
</ul>

            <ul class="nav navbar-nav navbar-right">
                
            </ul>
        </div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav>

<!-- End of Menubar -->

<div class="container">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article">
        <header>
            <h1 class="p-name entry-title" itemprop="headline name"><a href="#" class="u-url">BeautifulSoup, Bonktown and Growl</a></h1>

        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn">Brad Miller</span></p>
            <p class="dateline"><a href="#" rel="bookmark"><time class="published dt-published" datetime="2009-07-23T00:00:00+00:00" itemprop="datePublished" title="Publication date">2009-07-23 00:00</time></a></p>
                <p class="commentline">        </p>
<div class="g-commentcount" data-href="/posts/2009/07/beautifulsoup-bonktown-and-growl.html"></div>
<script src="https://apis.google.com/js/plusone.js"></script>


        </div>
        
    </header>

    <div class="e-content entry-content" itemprop="articleBody text">
    <p>Here's a little script that combines two of my favorite pass times.  Python programming and cycling.  bonktown.com is a great site that has steep discounts on road cycling gear.  They only sell one item at a time and they typically sell that item until it is gone.  I've gotten some great deals on clothing and other stuff on that site.  Bonktown helps you know whats currently for sale in a number of ways, including a nice dashboard widget that pops up a notifier when something new comes on sale.  The problem is that over time I've started to ignore the growl notifiers for bonktown, because I'm not interested in lots of the stuff they sell.<br><br>So, I wrote this python script that allows me to look for the stuff I am interested in buying.  It works by having a file of regular expressions that I use to search the item descriptions when something goes on sale at bonktown. If the item matches something I'm looking for then I get a Growl notification.  If not then I don't hear about it.<br><br>Here's the code:<br><br></p>
<pre class="prettyprint" style="overflow:auto;"><br>#!/usr/bin/env python2.6<br><br>import re<br>import urllib<br>from BeautifulSoup import BeautifulSoup<br>import Growl<br><br>name = "MyBonk"   # was BonkMe<br>notifications = ["search_hit"]<br>notifier = Growl.GrowlNotifier(name,notifications)<br>notifier.register()<br><br># Read file of search Terms<br>myTerms = open("/Users/bmiller/lib/bonk_items.txt").readlines()<br><br><br># Get the latest page<br>bt = urllib.urlopen("http://www.bonktown.com")<br><br>doc = BeautifulSoup(bt.read())<br><br>itemlist = doc.findAll(id=re.compile("item_title"))<br>price = doc.findAll(id=re.compile("price"))<br>desc = doc.findAll(id=re.compile("item_description"))<br><br>for term in myTerms:<br>    for i in range(len(itemlist)):<br>        if itemlist[i] and re.search(term[:-1],itemlist[i].contents[0],re.IGNORECASE):<br>            notifier.notify("search_hit",<br>                            itemlist[i].contents[0],<br>                            desc[i].contents[7].contents[0],<br>                            sticky=False)<br><br></pre>
<br><br>This script makes use of several modules:<br><ul>
<br><li>Growl</li>
<br><li>BeautifulSoup</li>
<br><li>urllib</li>
<br><li>re</li>
<br>
</ul>
<br><br>I would have liked to use one of the standard library html/xml parsers, but I could not find one that was as convenient or easy to use as BeautifulSoup.  If you can tell me how to parse messy html with one of the standard library xml modules please let me know.<br><div class="blogger-post-footer"><img width="1" height="1" src="https://blogger.googleusercontent.com/tracker/2759017781463016019-1449130420935951350?l=blog.bonelakesoftware.com" alt=""></div>
    </div>
    <aside class="postpromonav">
    <nav>
            <ul itemprop="keywords" class="tags">
           <li><a class="tag p-category" href="../../../categories/biking.html" rel="tag">Biking</a></li>
           <li><a class="tag p-category" href="../../../categories/python.html" rel="tag">Python</a></li>
        </ul>

            <ul class="pager">
            <li class="previous">
                <a href="aquamacs-2-0-elisp-fun.html" rel="prev" title="Aquamacs 2.0 elisp fun">Previous post</a>
            </li>
            <li class="next">
                <a href="../12/airboat-ride-in-the-everglades.html" rel="next" title="Airboat Ride in the Everglades">Next post</a>
            </li>
        </ul>

    </nav>
    </aside>
        <section class="comments">
        <h2>Comments</h2>
                <script src="https://apis.google.com/js/plusone.js"></script>
<div class="g-comments" data-href="http://reputablejournal.com/posts/2009/07/beautifulsoup-bonktown-and-growl.html" data-first_party_property="BLOGGER" data-view_type="FILTERED_POSTMOD">
</div>


        </section>
    
</article>
        

        </div>
        <!--End of body content-->

        <footer>
            Contents Â© 2014         <a href="mailto:bonelake@mac.com">Brad Miller</a> - Powered by         <a href="http://getnikola.com" rel="nofollow">Nikola</a>         
            
        </footer>
    </div>
</div>

            <script src="../../../assets/js/all-nocdn.js"></script>
    
<!-- Social buttons -->
<div id="addthisbox" class="addthis_toolbox addthis_peekaboo_style addthis_default_style addthis_label_style addthis_32x32_style">
<a class="addthis_button_more">Share</a>
<ul>
<li>
<a class="addthis_button_facebook"></a>
</li>
<li>
<a class="addthis_button_google_plusone_share"></a>
</li>
<li>
<a class="addthis_button_linkedin"></a>
</li>
<li>
<a class="addthis_button_twitter"></a>
</li>
</ul>
</div>
<script src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-4f7088a56bb93798"></script>
<!-- End of social buttons -->


    <script>jQuery("a.image-reference").colorbox({rel:"gal",maxWidth:"100%",maxHeight:"100%",scalePhotos:true});</script>

 <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-32638348-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


<a href="https://plus.google.com/+BradMillerNorse?rel=author">Google</a>
</body>
</html>
